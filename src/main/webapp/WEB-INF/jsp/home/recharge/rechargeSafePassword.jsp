<%@page contentType="text/html" pageEncoding="UTF-8" %><%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %><c:if test="${needSetSafePassword }">	<!-- 完善安全密码、安全信息 -->	<div id="setSafePassword" style="display:none;">		<div class="improveHeader">			<div class="improveLogoBox">				<i class="improveLogo"></i>			</div>			<div class="improveHeaderInfo">				<p class="improveHeaderTitle">					<span>尊敬的</span>					<span>${user.account }</span>					<span>,请设置您的安全密码，为您账户的资金保驾护航</span>				</p>				<span class="improveHeaderTips">当涉及到“充值”、“提款”、“银行卡绑定”的操作时，需要安全密码验证。以确定是您本人进行操作。</span>			</div>			<a href="javascript:void(0);" class="closeDialog"></a>		</div>		<div class="improveContent">			<form id="improveInfoForm" class="improveInfoForm" onsubmit="return false;">				<div class="labelDiv">					<span class="labelTitle"><strong class="fontColorRed">*</strong>安全密码</span>					<input id="safePassWord" onblur="checkSafePassWord()" name="safePassWord" type="password"						   class="labelCond" placeholder="不能与登录密码重复,请输入6位数"/>					<span id="safePassWordMsg" class="labelMsg fontColorRed" style="color: red"></span>				</div>				<div class="labelDiv">					<span class="labelTitle"><strong class="fontColorRed">*</strong>确认安全密码</span>					<input id="safePassWordCheck" onblur="checkSafePassWordCheck();" type="password" class="labelCond"						   placeholder="确认安全密码，需一致"/>					<span id="safePassWordCheckMsg" class="labelMsg fontColorRed" style="color: red"></span>				</div>				<div class="labelDiv">					<span class="labelTitle"><strong class="fontColorRed">*</strong>设置安全信息1</span>					<select id="qsType1" name="qsType1" class="selectCond" onchange="checkQsType(1);">						<option value="1">您的出生地是哪里?</option>						<option value="2">您高中的学校是?</option>						<option value="3">您父亲的名字是?</option>						<option value="4">您母亲的名字是?</option>						<option value="5">您的兴趣爱好是什么?</option>						<option value="6">您配偶的名字是?</option>						<option value="7">您大学学校的名字是?</option>						<option value="8">您的家乡是?</option>					</select>					<span id="qsType1Msg" class="labelMsg">找回安全密码的重要凭证！</span>				</div>				<div class="labelDiv">					<span class="labelTitle"><strong class="fontColorRed">*</strong>答案</span>					<input id="answer1" onblur="checnAnswer(1);" name="answer1" maxlength="50" type="text"						   class="labelCond"/>					<span id="answer1Msg" class="labelMsg fontColorRed"></span>				</div>				<div class="labelDiv">					<span class="labelTitle"><strong class="fontColorRed">*</strong>设置安全信息2</span>					<select id="qsType2" name="qsType2" class="selectCond" onchange="checkQsType(2);">						<option value="2">您高中的学校是?</option>						<option value="1">您的出生地是哪里?</option>						<option value="3">您父亲的名字是?</option>						<option value="4">您母亲的名字是?</option>						<option value="5">您的兴趣爱好是什么?</option>						<option value="6">您配偶的名字是?</option>						<option value="7">您大学学校的名字是?</option>						<option value="8">您的家乡是?</option>					</select>					<span id="qsType2Msg" class="labelMsg">找回安全密码的重要凭证！</span>				</div>				<div class="labelDiv">					<span class="labelTitle"><strong class="fontColorRed">*</strong>答案</span>					<input id="answer2" onblur="checnAnswer(2);" name="answer2" maxlength="50" type="text"						   class="labelCond"/>					<span id="answer2Msg" class="labelMsg fontColorRed"></span>				</div>				<div class="formBtns">					<span class="labelTitle"></span>					<input type="submit" class="btn" value="提交" onclick="setSafePassword();"/>				</div>			</form>		</div>	</div>	<script type="text/javascript">		function checkSafePassWord() {			$("#safePassWordMsg").html("");			var reg = /^[0-9]{6}$/;			if (!reg.test($("#safePassWord").val())) {				$("#safePassWordMsg").html("请输入6位数字");				return false;			}			return true;		}		function checkSafePassWordCheck() {			$("#safePassWordCheckMsg").html("");			if ($("#safePassWord").val() != $("#safePassWordCheck").val()) {				$("#safePassWordCheckMsg").html("两次输入密码不一致");				return false;			}			return true;		}		function checkQsType(i) {			var id = "#qsType" + i;			$(id + "Msg").html("找回安全密码的重要凭证！");			var qsType = $(id).val();			if (!qsType) {				$(id + "Msg").html("请选择安全信息");				return false;			}			return true;		}		function checnAnswer(i) {			var id = "#answer" + i;			$(id + "Msg").html("");			var answer = $(id).val();			if (!answer) {				$(id + "Msg").html("答案不能为空");				return false;			} else if (answer.length > 50) {				$(id + "Msg").html("答案不能超过50个字符");				return false;			}			return true;		}		function setSafePassword() {			var c = checkSafePassWord() & checkSafePassWordCheck() & checkQsType(1) & checkQsType(2) & checnAnswer(1) & checnAnswer(2);			if (c) {				ajaxObject('/safe/setSafeInformation?' + $("#improveInfoForm").serialize(), "POST", function (data) {					$.alert(data);//     			location.reload();					$("#setSafePassword").remove();				});			}		}	</script></c:if><script type="text/javascript">	function checkHadNotSafePassword() {		var needSet = $("#setSafePassword")[0];		if (needSet) {			layer.closeAll();			layer.open({				type: 1,				skin: 'setSafePswLayer',				shift: 5,				area: ['755px', '520px'],				title: false,				content: $('#setSafePassword')			});			return false;		}		return true;	}</script>