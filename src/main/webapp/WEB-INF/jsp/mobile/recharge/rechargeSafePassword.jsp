<%@page contentType="text/html" pageEncoding="UTF-8"%><%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%><!DOCTYPE html><html lang="en"><body class="bodyColorEEE"><c:if test="${needSetSafePassword }"><!-- 设置安全密码 --><div class="generalPlatArea setFundPwdArea" id="setSafePassword">    <div class="mainNav">        <a href="javascript:;" class="mainMenuBtn">            <img src="/res/mobile/images/mainMenuIcon.png" class="mainMenuIcon" />        </a>        <span class="headerTitle">设置安全密码</span>    </div>    <div class="container">        <div class="setFundPwdListBox">        	<form id="improveInfoForm" class="improveInfoForm" onsubmit="return false;">            <div class="listForm">                <div class="listDetail">                    <p class="detailTitle fontColorYellow">                        <i class="detailTitleLeft"></i>                        <span>安全密码</span>                        <span class="mustWhiteStar">*</span>                        <span class="detailTips fontColorGray">最小8位字符（字母及数字）</span>                    </p>                    <div class="labelCondSelect">                        <input id="safePassWord" onblur="checkSafePassWord();" name="safePassWord" type="password" class="labelCond" placeholder="提款必备验证密码，不能与登录密码重复" />                        <span id="safePassWordMsg" class="inputText errorWarn"></span>                    </div>                </div>                <div class="listDetail">                    <p class="detailTitle fontColorYellow">                        <i class="detailTitleLeft"></i>                        <span>确认安全密码</span>                        <span class="mustWhiteStar">*</span>                    </p>                    <div class="labelCondSelect">                        <input id="safePassWordCheck" onblur="checkSafePassWordCheck();" type="password" class="labelCond" placeholder="确认安全密码，需一致" />                        <span id="safePassWordCheckMsg" class="inputText errorWarn"></span>                    </div>                </div>                <div class="listDetail safeQA">                    <p class="detailTitle fontColorYellow">                        <i class="detailTitleLeft"></i>                        <span>设置安全信息1</span>                        <span class="mustWhiteStar">*</span>                        <span id="qsType1Msg" class="detailTips fontColorGray">找回安全密码的重要凭证</span>                    </p>                    <div class="labelCondSelect">                        <select id="qsType1" name="qsType1" onchange="checkQsType(1);" class="labelCond">                            <option value="1">您的出生地是哪里?</option> 	                        <option value="2">您高中的学校是?</option> 	                        <option value="3">您父亲的名字是?</option> 	                        <option value="4">您母亲的名字是?</option> 	                        <option value="5">您的兴趣爱好是什么?</option> 	                        <option value="6">您配偶的名字是?</option> 	                        <option value="7">您大学学校的名字是?</option> 	                        <option value="8">您的家乡是?</option>                        </select>                        <i class="selectIcon"></i>                    </div>                    <div class="labelCondSelect">                        <input id="answer1" onblur="checnAnswer(1);" name="answer1" maxlength="50" type="text" class="labelCond" />                        <span id="answer1Msg" class="inputText errorWarn"></span>                        <span class="inputText">答案：</span>                    </div>                </div>                <div class="listDetail safeQA">                    <p class="detailTitle fontColorYellow">                        <i class="detailTitleLeft"></i>                        <span>设置安全信息2</span>                        <span class="mustWhiteStar">*</span>                        <span id="qsType2Msg" class="detailTips fontColorGray">找回安全密码的重要凭证</span>                    </p>                    <div class="labelCondSelect">                        <select id="qsType2" name="qsType2" onchange="checkQsType(2);" class="labelCond">                            <option value="1">您的出生地是哪里?</option> 	                        <option value="2">您高中的学校是?</option> 	                        <option value="3">您父亲的名字是?</option> 	                        <option value="4">您母亲的名字是?</option> 	                        <option value="5">您的兴趣爱好是什么?</option> 	                        <option value="6">您配偶的名字是?</option> 	                        <option value="7">您大学学校的名字是?</option> 	                        <option value="8">您的家乡是?</option>                        </select>                        <i class="selectIcon"></i>                    </div>                    <div class="labelCondSelect">                        <input id="answer2" onblur="checnAnswer(2);" name="answer2" maxlength="50" type="text" class="labelCond" />                        <span id="answer2Msg" class="inputText errorWarn"></span>                        <span class="inputText">答案：</span>                    </div>                </div>            </div>            <div class="btnGroup">                <input type="submit" class="btn btnRed" value="提交" onclick="setSafePassword();" />            </div>            </form>        </div>    </div></div>	<script type="text/javascript">	function checkSafePassWord() {		$("#safePassWordMsg").html("");		var reg = /^[A-Za-z0-9]{8,16}$/;		if (!reg.test($("#safePassWord").val())) {			$("#safePassWordMsg").html("8-16位的字母或数字");			return false;		}		return true;	}		function checkSafePassWordCheck() {		$("#safePassWordCheckMsg").html("");		if ($("#safePassWord").val() != $("#safePassWordCheck").val()) {			$("#safePassWordCheckMsg").html("两次输入密码不一致");			return false;		}		return true;	}		function checkQsType(i) {		var id = "#qsType" + i;		$(id + "Msg").html("找回安全密码的重要凭证");		var qsType = $(id).val();		if (!qsType) {			$(id + "Msg").html("请选择安全信息");			return false;		}		return true;	}		function checnAnswer(i) {		var id = "#answer" + i;		$(id + "Msg").html("");		var answer = $(id).val();		if (!answer) {			$(id + "Msg").html("答案不能为空");			return false;		} else if (answer.length > 50) {    						$(id + "Msg").html("答案不能超过50个字符");			return false;		}		return true;	}		function setSafePassword() {		var c = checkSafePassWord() & checkSafePassWordCheck() & checkQsType(1) & checkQsType(2) & checnAnswer(1) & checnAnswer(2);		if (c) {			ajaxExt({type : "POST",url : '/safe/setSafeInformation?' + $("#improveInfoForm").serialize(), cache:false, dataType:'json', callback:function(data) {				window.location.reload(true);			}});		}	}	</script></c:if><script type="text/javascript">function checkHadNotSafePassword() {	var needSet = $("#setSafePassword")[0];	if (needSet) {		showDiv("setSafePassword");		return false;	}	return true;}</script></body></html>