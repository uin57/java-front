/** * Created by Administrator on 2016/4/8. */var storage = window.localStorage;//获取本地localStorage$(function () {    //自动填写本地存储的用户名密码    if (storage && storage.getItem('rememberPwd')) {        $('#userName').val(storage.getItem('userName'));        $('#userPassword').val(storage.getItem('userPassword'));        $('#rememberPwd').attr('checked', 'true');    }    //登录密码保存到本地localStorage    /*	$('#login').on('touchend', function(){                //防止iPhone/iPad上有时设置setItem()时会出现诡异的QUOTA_EXCEEDED_ERR错误                //在setItem之前，先removeItem()相关属性                storage.removeItem("userName");                storage.removeItem("userPassword");                storage.removeItem("rememberPwd");                if(storage && $('#rememberPwd').is(':checked')){                    storage.setItem("userName", $('#userName').val());                    storage.setItem("userPassword", $('#userPassword').val());                    storage.setItem("rememberPwd", $('#rememberPwd').is(':checked'));                }            });*/    $('#verfiy').click(function () {        var src = '/code.jpg?_=' + new Date().getTime();        $(this).attr('src', src);    });    var submitCount = 0;    $('#mobileLoginForm').submit(function () {        submitCount++;        if (submitCount == 1) {            var token = $("#mobileLoginForm").attr("data-token");            var content = $('#userName').val();            try {                storage.removeItem("userName");                storage.removeItem("userPassword");                storage.removeItem("rememberPwd");                if (storage && $('#rememberPwd').is(':checked')) {                    storage.setItem("userName", $('#userName').val());                    storage.setItem("userPassword", $('#userPassword')                        .val());                    storage.setItem("rememberPwd", $('#rememberPwd').is(                        ':checked'));                }            } catch (e) {            }            //		 var keyHex = CryptoJS.enc.Utf8.parse(token);            //		 var encrypted = CryptoJS.DES.encrypt(content, keyHex, {            //			 mode: CryptoJS.mode.ECB,            //			 padding: CryptoJS.pad.Pkcs7            //		 });            //		 content = encrypted.toString();            $("#account").val(content);            var password = $.md5($("#userPassword").val()) + token;            $("#password").val($.md5(password));            return true;        }        return false;    });});