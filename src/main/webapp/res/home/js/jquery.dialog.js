;(function ($) {    //关闭按钮    $(document).on("click", ".closeDialog,.closeBtn,.closePlatNotice", function () {        var box = $(this).parents(".dialogBoxContent");        //消息对话框删除，其他的隐藏。以便下次显示        if (box.attr("data-type") == 'alert')            box.remove();        else            box.hide();        $("#mask").hide();        //还有其他弹框就不要隐藏遮罩//		if($(".dialogBoxContent:visible").length==0){//			$("#mask").hide();//		}        //完善用户资料        if ($(this).attr('class').indexOf('closePlatNotice') > -1) {            if (userPassStatus == 0 && userPassCont) {                $.dialog('#userImproveInfoArea');            }        }    });    //标题按下    $(document).on("mousedown", ".dialogTitle", function (e) {        var box = $(this).parents(".dialogBoxContent");        var _x = e.pageX - parseInt(box.css("left"));// 获得左边位置        var _y = e.pageY - parseInt(box.css("top"));// 获得上边位置        $(this).data("prop", {            down: true,            x: _x,            y: _y        });    });    $(window).mouseup(function (e) {        var tit = $(".dialogTitle:visible");        var prop = tit.data("prop");        if (prop && prop.down) {            tit.data("prop", {                down: false            });        }    });    $(window).mousemove(function (e) {        var box = $(".dialogBoxContent:visible");        var _tit = box.find(".dialogTitle");        var _wid = box.width();        var _hei = box.height();        var prop = _tit.data("prop");        if (prop && prop.down) {            var x = e.pageX - prop.x;// 移动时根据鼠标位置计算控件左上角的绝对位置            if (x <= 0) {                x = 0            }            ;            x = Math.min($(window).width() - _wid, x) - 5;            var y = e.pageY - prop.y;            if (y <= 0) {                y = 0            }            ;            y = Math.min($(window).height() - _hei, y) - 5;            box.css({                top: y,                left: x            });// 控件新位置        }    });    $.dialog = function (id) {        $(".dialogBoxContent:visible").filter("[data-type='alert']").remove();        $(".dialogBoxContent:visible").hide();        var box = $(id);//		if(typeof(id)=='string'){//			box = $(id);//		} else {//			box = $(id.id);//			if(id.width){//				box.css({width:id.width});//			}//		}        //居中        var top = ($(window).height() - box.height()) / 2;        var pDiv = $(window);        var pLeft = 0;        var left = ((pDiv.width() - box.width()) / 2) + pLeft;        box.css({            left: left,            top: top        });        box.show();        $("#mask").show();    }    $.alert = function (options) {        //icon: no, ok, warn        var defaults = {            text: '',            title: '提示',            butText: '',            width: 400,            icon: 'warn',            confirm: function (btn) {                var box = btn.parents(".dialogBoxContent");                //消息对话框删除，其他的隐藏。以便下次显示                if (box.attr("data-type") == 'alert')                    box.remove();                else                    box.hide();                $("#mask").hide();                //还有其他弹框就不要隐藏遮罩//				if($(".dialogBoxContent:visible").length==0){//					$("#mask").hide();//				}            }        };        $(".dialogBoxContent:visible").filter("[data-type='alert']").remove();        $(".dialogBoxContent:visible").hide();        var opts = null;        if (typeof (options) == 'string') {            opts = $.extend(defaults, {                text: options            });        } else {            opts = $.extend(defaults, options);        }        // var xml ='<div class="mask"></div>';        var xml = '<div class="dialogBoxContent" data-type="alert">';        xml += '<p class="dialogTitle">';        xml += '<span>'            + opts.title            + '</span> <a href="javascript:void(0);" class="closeDialog"></a>';        xml += '</p>';        xml += '<div class="tableBox">';        xml += '<div class="msg">';        if (opts.icon == 'ok') {            xml += '<i class="msgIcon successMsgIcon"></i>';        } else if (opts.icon == 'warn') {            xml += '<i class="msgIcon warnMsgIcon"></i>';        }        xml += '<p class="msgText">' + opts.text + '</p></div>';        xml += opts.butText;        // if(options.button){        xml += '<div class="dialogBtn">';//		 xml +='<a href="javascript:void(0);" class="btn confirm">确认</a>';        xml += '<a href="javascript:void(0);" class="btn closeBtn">关闭</a>';        xml += '</div>';        //			        // }        xml += '</div>';        xml += '</div>';        var box = $(xml);        box.find(".confirm").click(function () {            opts.confirm($(this));        });        box.css({width: opts.width});        $("#mask").show();        $('#dialogBox').append(box);        //居中        var top = ($(window).height() - box.height()) / 2;        var pDiv = null;        var pLeft = 0;        if (opts.div == null) {            pDiv = $(window);        }        else {            pDiv = $(opts.div);            pLeft = pDiv.offset().left;        }        var left = ((pDiv.width() - box.width()) / 2) + pLeft;        box.css({            left: left,            top: top        });    }})(jQuery);